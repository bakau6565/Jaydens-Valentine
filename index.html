<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Will you be my Valentine?</title>

  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

  <style>
    :root {
      --bg1: #ffd6e7;
      --bg2: #ffeef6;
      --card: #ffffffcc;
      --yes: #ff4d4d;
      --yesHover: #b30000;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100svh;
      display: grid;
      place-items: center;
      /* NEW BACKGROUND IMAGE */
      background: url("valentines-day-zoom-backgrounds-hearts-1643038425.avif") center / cover no-repeat fixed;
      font-family: system-ui, sans-serif;
      overflow: hidden;
      padding: 16px;
    }

    /* FULL-SCREEN CONFETTI CANVAS */
    #confettiCanvas {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 9999;
    }

    .card {
      width: min(720px, 92vw);
      padding: 26px 22px;
      background: var(--card);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      text-align: center;
      box-shadow: 0 18px 60px rgba(0,0,0,.15);
    }

    .art {
      width: min(260px, 80vw);
      margin: 0 auto 10px;
      display: block;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
    
      /* NEW â€” heartbeat animation */
      animation: heartbeat 1.6s infinite;
    }

    h1 {
      font-size: clamp(26px, 4vw, 44px);
      margin: 12px 0 18px;
    }

    .button-zone {
      position: relative;
      width: min(520px, 92%);
      height: 150px;
      margin: 0 auto;
      touch-action: none;
    }

    button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      padding: 16px 24px;
      font-size: 18px;
      font-weight: 800;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      box-shadow: 0 10px 24px rgba(0,0,0,.14);
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .12s ease, background .12s ease;
    }

    #yesBtn {
      left: 18%;
      background: var(--yes);
      color: #fff;
    }
    #yesBtn:hover { background: var(--yesHover); }

    #noBtn {
      left: 62%;
      background: #e5e7eb;
      color: #111827;
    }

    .hint {
      margin-top: 10px;
      font-size: 13px;
      opacity: .7;
    }

    .result {
      display: none;
      margin-top: 18px;
      animation: pop .35s ease;
    }

    .result h2 {
      font-size: clamp(30px, 4.5vw, 46px);
      margin: 10px 0;
    }

    .fireworks {
      width: min(380px, 90vw);
      margin: 0 auto;
      display: block;
    }

    @keyframes pop {
      from { transform: scale(.96); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    /* ---------- ENVELOPE INTRO ---------- */
.envelope-screen{
  display:grid;
  place-items:center;
  width:100%;
}

.envelope{
  position:relative;
  width:min(360px, 90vw);
  height:240px;
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  transform: translateZ(0);
}

.env-back{
  position:absolute;
  inset:0;
  background:#fff;
  border-radius:18px;
  box-shadow:0 18px 60px rgba(0,0,0,.15);
}

.env-front{
  position:absolute;
  inset:0;
  border-radius:18px;
  background:linear-gradient(#ffffffcc, #ffffffaa);
  clip-path: polygon(0 40%, 50% 75%, 100% 40%, 100% 100%, 0 100%);
}

.env-flap{
  position:absolute;
  inset:0;
  border-radius:18px;
  background:linear-gradient(#ffe3ee, #ffd0e4);
  clip-path: polygon(0 40%, 50% 5%, 100% 40%);
  transform-origin: top center;
  transition: transform .6s ease;
}

.env-letter{
  position:absolute;
  left:7%;
  right:7%;
  bottom:10%;
  height:72%;
  background:#fff;
  border-radius:14px;
  box-shadow:0 10px 24px rgba(0,0,0,.12);
  display:grid;
  place-items:center;
  transform: translateY(0);
  transition: transform .7s ease;
}

.letter-text{
  font-weight:800;
  font-size:18px;
  opacity:.9;
}

/* OPEN STATE */
.envelope.open .env-flap{ transform: rotateX(180deg); }
.envelope.open .env-letter{ transform: translateY(-40%); }

/* fade out envelope screen when done */
.envelope-screen.fadeout{ animation: fadeout .45s ease forwards; }
@keyframes fadeout{ to { opacity:0; transform: scale(.98); } }
    
    /* ---------- HEART BEAT ---------- */
@keyframes heartbeat {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
  }
}
    
    /* ---------- FALLING HEARTS BACKGROUND ---------- */
#heartsLayer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0; /* behind the card */
  overflow: hidden;
}

/* Make sure your card stays above the hearts */
.card{
  position: relative;
  z-index: 2;
}

/* Each heart */
.falling-heart{
  position: absolute;
  top: -10vh;
  font-size: 18px;
  opacity: 0.85;
  filter: drop-shadow(0 6px 8px rgba(0,0,0,.12));
  animation-name: heartFall;
  animation-timing-function: linear;
  animation-iteration-count: infinite;
  will-change: transform;
}

@keyframes heartFall{
  0%   { transform: translate3d(0, -10vh, 0) rotate(0deg); }
  100% { transform: translate3d(var(--drift, 0vw), 115vh, 0) rotate(360deg); }

}

    
  </style>
</head>

<body>
  <canvas id="confettiCanvas"></canvas>
  <div id="heartsLayer" aria-hidden="true"></div>
  
  <section id="envelopeScreen" class="envelope-screen" aria-label="Open envelope">
    <div class="envelope" id="envelope" role="button" tabindex="0">
      <div class="env-back"></div>
      <div class="env-letter">
        <div class="letter-text">Tap to open ðŸ’Œ</div>
      </div>
      <div class="env-front"></div>
      <div class="env-flap"></div>
    </div>
  </section>

  <main class="card" id="app" style="display:none;">
    
    <!-- RED HEART -->
<svg class="art" viewBox="0 0 320 240" xmlns="http://www.w3.org/2000/svg" aria-label="Heart">

  <defs>
    <!-- RED gradient -->
    <linearGradient id="pinkHeart" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ff4d4d"/>
      <stop offset="100%" stop-color="#b30000"/>
    </linearGradient>

    <!-- Soft shadow -->
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="10" stdDeviation="8"
                    flood-color="#000"
                    flood-opacity=".18"/>
    </filter>
  </defs>

  <!-- Heart Shape -->
  <path
    filter="url(#softShadow)"
    d="
      M160 210
      C120 180 80 150 80 110
      C80 80 105 60 130 60
      C150 60 158 75 160 85
      C162 75 170 60 190 60
      C215 60 240 80 240 110
      C240 150 200 180 160 210
      Z"
    fill="url(#pinkHeart)"
  />

</svg>

    <h1>Jayden, will you be my valentine?</h1>

    <section class="button-zone" id="zone">
      <button id="yesBtn">Yes</button>
      <button id="noBtn">No</button>
    </section>

    <!-- HINT -->
    <div class="hint" id="hint">Why are you trying to click no?</div>

    <section class="result" id="result">
      <h2>YAY! ðŸŽ‰</h2>
      <img
        class="fireworks"
        src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExNmtqNTk0MXBxMHZwdzYxajQzaTFqYXRqMzZpOHp2MGlkNHFrZ3d2aCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/11sBLVxNs7v6WA/giphy.gif"
        alt="Fireworks"
      />
    </section>
  </main>

  <script>
    const zone = document.getElementById("zone");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const result = document.getElementById("result");
    const hint = document.getElementById("hint");

  /* ---------- NO BUTTON PHRASES ---------- */
    const noPhrases = [
      "Leave me alone ðŸ˜­",
      "Don't press me",
      "Press yes â¤ï¸",
      "Stop chasing me",
      "Iâ€™m scared ðŸ˜³",
      "Why though?",
      "Please no",
      "Not happening",
      "Try the other button ðŸ˜‰",
      "You canâ€™t catch me",
      "Just press yes already",
      "Wrong choice buddy"
    ];

    let phraseIndex = 0;
    
    /* Cooldown control */
    let lastPhraseChange = 0;
    const phraseCooldownMs = 1200; // change every 0.6 sec
    
    /* ---------- CONFETTI ---------- */
    const confettiCanvas = document.getElementById("confettiCanvas");

    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
      confettiCanvas.style.width = "100vw";
      confettiCanvas.style.height = "100vh";
    }

    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);
    window.addEventListener("orientationchange", () => setTimeout(resizeConfettiCanvas, 150));

    const confettiInstance = confetti.create(confettiCanvas, {
      resize: false,
      useWorker: true
    });

    function fullScreenConfetti() {
      const end = Date.now() + 1600;

      (function frame() {
        confettiInstance({
          particleCount: 12,
          spread: 90,
          startVelocity: 45,
          ticks: 180,
          origin: { x: Math.random(), y: Math.random() * 0.3 }
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();

      setTimeout(() => {
        confettiInstance({
          particleCount: 300,
          spread: 140,
          startVelocity: 60,
          ticks: 220,
          origin: { x: 0.5, y: 0.55 }
        });
      }, 300);
    }

    /* ---------- YES BUTTON GROWS ---------- */
    let yesScale = 1;
    function growYes() {
      yesScale = Math.min(2.2, yesScale + 0.1);
      yesBtn.style.transform = `translateY(-50%) scale(${yesScale})`;
    }

    /* ---------- NO BUTTON RUNS AWAY ---------- */
    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    function moveNo(px, py) {
      const z = zone.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      let dx = (b.left + b.width / 2) - px;
      let dy = (b.top + b.height / 2) - py;
      let mag = Math.hypot(dx, dy) || 1;
      dx /= mag;
      dy /= mag;

      let newLeft = (b.left - z.left) + dx * 150;
      let newTop  = (b.top - z.top) + dy * 150;

      newLeft = clamp(newLeft, 0, z.width - b.width);
      newTop  = clamp(newTop, 0, z.height - b.height);

      noBtn.style.left = newLeft + "px";
      noBtn.style.top = newTop + "px";
      noBtn.style.transform = "none";

      /* TEXT CHANGE WITH DELAY */
      const now = Date.now();
      if (now - lastPhraseChange >= phraseCooldownMs) {
        phraseIndex = (phraseIndex + 1) % noPhrases.length;
        noBtn.textContent = noPhrases[phraseIndex];
        lastPhraseChange = now;
      }

      growYes();
    }

    zone.addEventListener("pointermove", e => {
      const b = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        (b.left + b.width / 2) - e.clientX,
        (b.top + b.height / 2) - e.clientY
      );
      if (d < 140) moveNo(e.clientX, e.clientY);
    });

    noBtn.addEventListener("click", e => e.preventDefault());

    /* ---------- YES CLICK ---------- */
    yesBtn.addEventListener("click", () => {
      zone.style.display = "none";
      hint.style.display = "none";     // HIDE THE HINT
      result.style.display = "block";
      resizeConfettiCanvas();
      fullScreenConfetti();
    });
    
    /* ---------- ENVELOPE INTRO ---------- */
const envelopeScreen = document.getElementById("envelopeScreen");
const envelope = document.getElementById("envelope");
const app = document.getElementById("app");

function openEnvelope() {
  envelope.classList.add("open");

  setTimeout(() => {
    envelopeScreen.classList.add("fadeout");
  }, 650);

  setTimeout(() => {
    envelopeScreen.style.display = "none";
    app.style.display = "block";
    resizeConfettiCanvas(); // important after layout changes
  }, 1100);
}

envelope.addEventListener("click", openEnvelope);
envelope.addEventListener("keydown", (e) => {
  if (e.key === "Enter" || e.key === " ") openEnvelope();
});
    
    /* ---------- FALLING HEARTS GENERATOR ---------- */
const heartsLayer = document.getElementById("heartsLayer");

function rand(min, max){
  return Math.random() * (max - min) + min;
}

function spawnHeart(){
  const heart = document.createElement("div");
  heart.className = "falling-heart";
  heart.textContent = "â™¥";

  // Random horizontal start
  heart.style.left = rand(0, 100) + "vw";

  // Random size
  heart.style.fontSize = rand(14, 30) + "px";

  // Random color (red/pink)
  const colors = ["#ff2d55", "#ff4d7d", "#e60023", "#ff7aa8"];
  heart.style.color = colors[Math.floor(Math.random() * colors.length)];

  // Random fall duration + slight horizontal drift
  const duration = rand(6, 14);
  const drift = rand(-25, 25);
  heart.style.animationDuration = duration + "s";
  heart.style.animationDelay = rand(0, 6) + "s";

  // Apply drift by using translateX in a CSS variable style
  heart.style.setProperty("--drift", drift + "vw");

  heartsLayer.appendChild(heart);

  // Cleanup after a while (keeps DOM from growing forever)
  setTimeout(() => heart.remove(), (duration + 8) * 1000);
}

// Start with a bunch already falling
for(let i = 0; i < 28; i++){
  spawnHeart();
}

// Keep spawning periodically
setInterval(spawnHeart, 450);
    
  </script>
</body>
</html>









